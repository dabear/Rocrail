/* Rocrail - Model Railroad Software Copyright (c) 2002-2015 Robert Jan Versluis, Rocrail.net All rights reserved.*/#include "xmlscriptdlg.h"#include "wx/wxprec.h"#ifndef WX_PRECOMP#include "wx/wx.h"#include "wx/defs.h"#endif#include "rocview/public/guiapp.h"#include "rocrail/wrapper/public/DataReq.h"#include "rocs/public/node.h"XmlScriptDlg::XmlScriptDlg( wxWindow* parent, iONode node ):xmlscriptdlggen( parent ){  m_Data = node;  m_XML->SetValue( wxString(wDataReq.getdata(node),wxConvUTF8) );}void XmlScriptDlg::onCancel( wxCommandEvent& event ){  EndModal(0);}void XmlScriptDlg::onHelp( wxCommandEvent& event ){// TODO: Implement onHelp}void XmlScriptDlg::onSave( wxCommandEvent& event ){  iONode cmd = NodeOp.inst( wDataReq.name(), NULL, ELEMENT_NODE );  wDataReq.setcmd( cmd, wDataReq.writexmlscript );  wDataReq.setfilename( cmd, wDataReq.getfilename(m_Data) );  wDataReq.setdata( cmd, m_XML->GetValue().mb_str(wxConvUTF8) );  wxGetApp().sendToRocrail( cmd );  cmd->base.del(cmd);  EndModal( wxID_OK );}